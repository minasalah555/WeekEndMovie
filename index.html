<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekend Movie Arabia - Celo DApp</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <style>
        body { background-color: #1a202c; color: #fff; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .movie-card { transition: transform 0.3s; }
        .movie-card:hover { transform: scale(1.05); }
    </style>
</head>
<body class="bg-gray-900 text-white">

    <!-- Navbar -->
    <nav class="flex justify-between items-center p-6 bg-gray-800 shadow-lg">
        <h1 class="text-2xl font-bold text-yellow-400">ğŸ¬ Weekend Movie Arabia</h1>
        <button id="connectWalletBtn" onclick="connectWallet()" class="bg-yellow-500 hover:bg-yellow-600 text-black font-bold py-2 px-6 rounded-full transition">
            Connect Celo Wallet ğŸ”—
        </button>
        <span id="walletAddress" class="hidden bg-green-600 text-white py-2 px-4 rounded-full text-sm"></span>
    </nav>

    <!-- Hero Section -->
    <header class="text-center py-12 px-4">
        <h2 class="text-4xl font-bold mb-4">Ø§ÙƒØªØ´Ù ÙˆÙ‚ÙŠÙ… Ø§Ù„Ø£ÙÙ„Ø§Ù… Ø¹Ù„Ù‰ Celo Blockchain</h2>
        <p class="text-gray-400 mb-8">Ù…Ù†ØµØ© Ù„Ø§Ù…Ø±ÙƒØ²ÙŠØ© Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£ÙÙ„Ø§Ù… Ø¨Ø´ÙØ§ÙÙŠØ© Ù…Ø·Ù„Ù‚Ø©.</p>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4">
        
        <!-- Review Section (Hidden until connected) -->
        <div id="reviewSection" class="hidden bg-gray-800 p-6 rounded-lg mb-10 border border-yellow-500">
            <h3 class="text-xl font-bold mb-4">ğŸ“ Ø£Ø¶Ù ØªÙ‚ÙŠÙŠÙ…Ùƒ (Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ù„ÙˆÙƒØªØ´ÙŠÙ†)</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input type="text" id="movieName" placeholder="Ø§Ø³Ù… Ø§Ù„ÙÙŠÙ„Ù…" class="p-3 rounded bg-gray-700 text-white border border-gray-600">
                <select id="rating" class="p-3 rounded bg-gray-700 text-white border border-gray-600">
                    <option value="5">â­â­â­â­â­ (5)</option>
                    <option value="4">â­â­â­â­ (4)</option>
                    <option value="3">â­â­â­ (3)</option>
                    <option value="2">â­â­ (2)</option>
                    <option value="1">â­ (1)</option>
                </select>
            </div>
            <textarea id="comment" placeholder="Ø§ÙƒØªØ¨ Ø±Ø£ÙŠÙƒ Ù‡Ù†Ø§..." class="w-full mt-4 p-3 rounded bg-gray-700 text-white border border-gray-600 h-24"></textarea>
            <button onclick="submitReview()" class="mt-4 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-8 rounded w-full">
                ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¹Ù„Ù‰ Celo ğŸš€
            </button>
        </div>

        <!-- Movies Grid -->
        <h3 class="text-2xl font-bold mb-6 border-b border-gray-700 pb-2">Ø£Ø­Ø¯Ø« Ø§Ù„Ø£ÙÙ„Ø§Ù…</h3>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8" id="moviesGrid">
            <!-- Placeholder Movies -->
            <div class="movie-card bg-gray-800 rounded-lg overflow-hidden shadow-lg">
                <img src="https://image.tmdb.org/t/p/w500/1E5baAaEse26fej7uHkjPoXIpo.jpg" alt="Movie" class="w-full h-64 object-cover">
                <div class="p-4">
                    <h4 class="font-bold text-lg">Dune: Part Two</h4>
                    <p class="text-gray-400 text-sm">2024</p>
                </div>
            </div>
            <div class="movie-card bg-gray-800 rounded-lg overflow-hidden shadow-lg">
                <img src="https://image.tmdb.org/t/p/w500/kingdom.jpg" alt="Movie" class="w-full h-64 object-cover">
                <div class="p-4">
                    <h4 class="font-bold text-lg">Kingdom of the Planet</h4>
                    <p class="text-gray-400 text-sm">2024</p>
                </div>
            </div>
             <div class="movie-card bg-gray-800 rounded-lg overflow-hidden shadow-lg">
                <img src="https://image.tmdb.org/t/p/w500/godzilla.jpg" alt="Movie" class="w-full h-64 object-cover">
                <div class="p-4">
                    <h4 class="font-bold text-lg">Godzilla x Kong</h4>
                    <p class="text-gray-400 text-sm">2024</p>
                </div>
            </div>
        </div>
    </main>

    <footer class="text-center py-8 text-gray-500 mt-10 border-t border-gray-800">
        <p>Built for Celo Proof of Ship Season 10 ğŸš¢</p>
    </footer>

    <script>
        let provider, signer, account;

        async function connectWallet() {
            if (window.ethereum) {
                try {
                    // Request account access
                    provider = new ethers.providers.Web3Provider(window.ethereum);
                    await provider.send("eth_requestAccounts", []);
                    signer = provider.getSigner();
                    account = await signer.getAddress();

                    // Switch to Celo Alfajores Testnet
                    try {
                        await window.ethereum.request({
                            method: 'wallet_switchEthereumChain',
                            params: [{ chainId: '0xaef3' }], // 44787 in hex
                        });
                    } catch (switchError) {
                        // If network is missing, add it
                        if (switchError.code === 4902) {
                            await window.ethereum.request({
                                method: 'wallet_addEthereumChain',
                                params: [{
                                    chainId: '0xaef3',
                                    chainName: 'Celo Alfajores Testnet',
                                    nativeCurrency: { name: 'Celo', symbol: 'CELO', decimals: 18 },
                                    rpcUrls: ['https://alfajores-forno.celo-testnet.org'],
                                    blockExplorerUrls: ['https://alfajores.celoscan.io/']
                                }],
                            });
                        }
                    }

                    // Update UI
                    document.getElementById("connectWalletBtn").classList.add("hidden");
                    document.getElementById("walletAddress").innerText = account.substring(0, 6) + "..." + account.substring(account.length - 4);
                    document.getElementById("walletAddress").classList.remove("hidden");
                    document.getElementById("reviewSection").classList.remove("hidden");
                    
                    alert("ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø¨Ù†Ø¬Ø§Ø­! âœ…");

                } catch (error) {
                    console.error(error);
                    alert("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…Ø­ÙØ¸Ø©.");
                }
            } else {
                alert("ÙŠØ±Ø¬Ù‰ ØªØ«Ø¨ÙŠØª Ù…Ø­ÙØ¸Ø© MetaMask Ø£Ùˆ Celo Extension Wallet!");
            }
        }

        async function submitReview() {
            // Ù‡Ù†Ø§ Ø³Ù†Ø¶ÙŠÙ ÙƒÙˆØ¯ Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ø¨Ù…Ø¬Ø±Ø¯ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù…Ù† Ø§Ù„Ø¹Ù…ÙŠÙ„
            alert("Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ø°ÙƒÙŠ ÙÙˆØ± Ù†Ø´Ø±Ù‡! ğŸš€");
        }
    </script>
</body>
</html>
